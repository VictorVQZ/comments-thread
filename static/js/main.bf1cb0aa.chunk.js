(this["webpackJsonpcomments-thread"]=this["webpackJsonpcomments-thread"]||[]).push([[0],{11:function(e,t,n){e.exports={addComment:"AddComment_addComment__3AEk0",textarea:"AddComment_textarea__2PpAX",publishButton:"AddComment_publishButton__2c1Ij"}},24:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},33:function(e,t,n){e.exports=n(64)},38:function(e,t,n){},39:function(e,t,n){},4:function(e,t,n){e.exports={comment:"Comment_comment__2SmJa",replyButton:"Comment_replyButton__tQpg7",commentDate:"Comment_commentDate__1hP4X",commentHeader:"Comment_commentHeader__3HIPZ",profileImg:"Comment_profileImg__3o72H",author:"Comment_author__aGgeV"}},64:function(e,t,n){"use strict";n.r(t);var a,o=n(0),m=n.n(o),c=n(7),r=n.n(c),i=(n(38),n(24)),d=n.n(i),s=(n(39),n(6)),l=n(25),u=n(26),p=n(31),f=n(27),h=n(32),v=n(9),E=n(29),b=n.n(E).a.create({baseURL:"https://my-json-server.typicode.com/VictorVQZ/comments-thread"}),_=n(8),g=n.n(_),C=n(10),A=n(4),y=n.n(A),j=function(e){return m.a.createElement("div",{className:"replies"},e.replies.map((function(t){return m.a.createElement(k,{key:t.id,id:t.id,author:t.author,comment:t.comment,date:t.date,replies:t.replies,commentAdded:e.commentAdded})})))},O=n(11),D=n.n(O),N=function(e){var t=Object(o.useState)(""),n=Object(C.a)(t,2),c=n[0],r=n[1];return Object(o.useEffect)((function(){a.focus()}),[]),m.a.createElement("div",{className:D.a.addComment},m.a.createElement("textarea",{className:D.a.textarea,onChange:function(e){return r(e.target.value)},value:c,ref:function(e){a=e}}),m.a.createElement("button",{className:D.a.publishButton,onClick:function(){e.replyState&&e.replyState(!1),e.commentAdded(c,e.commentId),r("")}},"Publish"))},k=function(e){var t=Object(o.useState)(!1),n=Object(C.a)(t,2),a=n[0],c=n[1];return m.a.createElement("div",{className:y.a.comment},m.a.createElement("div",{className:y.a.commentHeader},m.a.createElement("img",{src:"/comments-thread/pngfuel.com.png",className:y.a.profileImg}),m.a.createElement("div",{style:{display:"inline-block"}},m.a.createElement("div",{className:y.a.author},e.author),m.a.createElement("div",{className:y.a.commentDate},g()(e.date).format("DD-MM-YYYY HH:mm")))),m.a.createElement("div",{className:"body"},e.comment),m.a.createElement("div",null,m.a.createElement("button",{className:y.a.replyButton,onClick:function(){return c(!a)}},"Reply"),a?m.a.createElement(N,{commentId:e.id,commentAdded:e.commentAdded,replyState:c}):null),m.a.createElement(j,{replies:e.replies,commentAdded:e.commentAdded}))},H=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.onComponentMount()}},{key:"publishCommentHandler",value:function(e,t){var n={author:"user@test.com",comment:e,date:g()().format("YYYY-MM-DDTHH:mm:ss"),commentId:t};this.props.onAddedComment(n)}},{key:"findReplies",value:function(e){var t=this,n=[];return this.props.comments.filter((function(t){return t.commentId===e&&t.id!==e})).forEach((function(e,a){var o=Object(s.a)({},e);o.replies=t.findReplies(e.id),n.push(o)})),n}},{key:"render",value:function(){var e=this,t=this.findReplies(null);return m.a.createElement("div",{style:{paddingRight:"10px",paddingBottom:"10px"}},m.a.createElement("h4",null,"Add comment"),m.a.createElement(N,{commentId:null,commentAdded:this.publishCommentHandler.bind(this)}),t.map((function(t){return m.a.createElement(k,{key:t.id,id:t.id,author:t.author,comment:t.comment,date:t.date,replies:t.replies,commentAdded:e.publishCommentHandler.bind(e)})})))}}]),t}(o.Component),M=Object(v.b)((function(e){return{comments:e.comments}}),(function(e){return{onComponentMount:function(){return e((function(e){b.get("/comments").then((function(t){var n=t.data;e({type:"FETCH_DATA",comments:n})}))}))},onAddedComment:function(t){return e((n=t,function(e){b.post("/comments",n).then((function(t){var n=t.data;e({type:"ADD_COMMENT",comment:n})}))}));var n}}}))(H);var w=function(){return m.a.createElement("div",{className:"App"},m.a.createElement("header",{className:"App-header"},m.a.createElement("img",{src:d.a,className:"App-logo",alt:"logo"})),m.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=n(5),I={comments:[]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DATA":return Object(s.a)({},e,{comments:t.comments});case"ADD_COMMENT":var n=t.comment;return e.comments.some((function(e){return e.id===n.id}))&&(n.id=(new Date).getTime()),Object(s.a)({},e,{comments:e.comments.concat(n)});default:return e}},T=n(30),Y=Object(x.c)(B,Object(x.a)((function(e){return function(t){return function(n){console.log("[Middleware] Dispatching",n);var a=t(n);return console.log("[Middleware] next state",e.getState()),a}}}),T.a));r.a.render(m.a.createElement(v.a,{store:Y},m.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.bf1cb0aa.chunk.js.map