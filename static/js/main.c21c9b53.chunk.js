(this["webpackJsonpcomments-thread"]=this["webpackJsonpcomments-thread"]||[]).push([[0],{10:function(e,t,n){e.exports={addComment:"AddComment_addComment__3AEk0",textarea:"AddComment_textarea__2PpAX",publishButton:"AddComment_publishButton__2c1Ij"}},23:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},32:function(e,t,n){e.exports=n(62)},37:function(e,t,n){},38:function(e,t,n){},6:function(e,t,n){e.exports={comment:"Comment_comment__2SmJa",replyButton:"Comment_replyButton__tQpg7",commentDate:"Comment_commentDate__1hP4X",commentHeader:"Comment_commentHeader__3HIPZ"}},62:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),m=n(7),c=n.n(m),r=(n(37),n(23)),i=n.n(r),d=(n(38),n(5)),s=n(24),u=n(25),l=n(30),p=n(26),h=n(31),f=n(8),v=n(28),E=n.n(v).a.create({baseURL:"https://my-json-server.typicode.com/VictorVQZ/comments-thread"}),b=function(e){return{type:"FETCH_DATA",comments:e}},g=n(9),A=n(6),C=n.n(A),_=function(e){return o.a.createElement("div",{className:"replies"},e.replies.map((function(t){return o.a.createElement(D,{key:t.id,id:t.id,author:t.author,comment:t.comment,date:t.date,replies:t.replies,commentAdded:e.commentAdded})})))},y=n(10),j=n.n(y),O=function(e){var t=Object(a.useState)(""),n=Object(g.a)(t,2),m=n[0],c=n[1];return o.a.createElement("div",{className:j.a.addComment},o.a.createElement("textarea",{className:j.a.textarea,onChange:function(e){return c(e.target.value)},value:m}),o.a.createElement("button",{className:j.a.publishButton,onClick:function(){e.replyState&&e.replyState(!1),e.commentAdded(m,e.commentId),c("")}},"Publish"))},D=function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),m=n[0],c=n[1];return o.a.createElement("div",{className:C.a.comment},o.a.createElement("div",{className:C.a.commentHeader},o.a.createElement("div",null,e.author),o.a.createElement("div",{className:C.a.commentDate},e.date)),o.a.createElement("div",{className:"body"},e.comment),o.a.createElement("div",null,o.a.createElement("button",{className:C.a.replyButton,onClick:function(){return c(!m)}},"Reply"),m?o.a.createElement(O,{commentId:e.id,commentAdded:e.commentAdded,replyState:c}):null),o.a.createElement(_,{replies:e.replies,commentAdded:e.commentAdded}))},N=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.onComponentMount()}},{key:"publishCommentHandler",value:function(e,t){var n=this,a=new Date,o={author:"user@test.com",comment:e,date:a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+"T"+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds(),commentId:t};E.post("/comments",o).then((function(e){var t=e.data;n.props.comments.some((function(e){return e.id===t.id}))&&(t.id=(new Date).getTime()),n.props.onAddedComment(t)}))}},{key:"findReplies",value:function(e){var t=this,n=[];return this.props.comments.filter((function(t){return t.commentId===e&&t.id!==e})).forEach((function(e,a){var o=Object(d.a)({},e);o.replies=t.findReplies(e.id),n.push(o)})),n}},{key:"render",value:function(){var e=this,t=this.findReplies(null);return o.a.createElement("div",{style:{paddingRight:"10px"}},o.a.createElement("h4",null,"Add comment"),o.a.createElement(O,{commentId:null,commentAdded:this.publishCommentHandler.bind(this)}),t.map((function(t){return o.a.createElement(D,{key:t.id,id:t.id,author:t.author,comment:t.comment,date:t.date,replies:t.replies,commentAdded:e.publishCommentHandler.bind(e)})})))}}]),t}(a.Component),k=Object(f.b)((function(e){return{comments:e.comments}}),(function(e){return{onFetchData:function(t){return e({type:"FETCH_DATA",comments:t})},onComponentMount:function(){return e((function(e){E.get("/comments").then((function(t){var n=t.data;e(b(n))}))}))},onAddedComment:function(t,n){return e({type:"ADD_COMMENT",comment:t,commentId:n})}}}))(N);var w=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:i.a,className:"App-logo",alt:"logo"})),o.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=n(4),M={comments:[]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DATA":return Object(d.a)({},e,{comments:t.comments});case"ADD_COMMENT":return Object(d.a)({},e,{comments:e.comments.concat(t.comment)});default:return e}},T=n(29),I=Object(H.c)(x,Object(H.a)((function(e){return function(t){return function(n){console.log("[Middleware] Dispatching",n);var a=t(n);return console.log("[Middleware] next state",e.getState()),a}}}),T.a));c.a.render(o.a.createElement(f.a,{store:I},o.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.c21c9b53.chunk.js.map