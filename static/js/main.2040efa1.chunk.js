(this["webpackJsonpcomments-thread"]=this["webpackJsonpcomments-thread"]||[]).push([[0],{11:function(e,t,n){e.exports={addComment:"AddComment_addComment__3AEk0",textarea:"AddComment_textarea__2PpAX",publishButton:"AddComment_publishButton__2c1Ij"}},24:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},33:function(e,t,n){e.exports=n(64)},38:function(e,t,n){},39:function(e,t,n){},6:function(e,t,n){e.exports={comment:"Comment_comment__2SmJa",replyButton:"Comment_replyButton__tQpg7",commentDate:"Comment_commentDate__1hP4X",commentHeader:"Comment_commentHeader__3HIPZ"}},64:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),m=n(7),c=n.n(m),r=(n(38),n(24)),i=n.n(r),d=(n(39),n(5)),s=n(25),l=n(26),u=n(31),p=n(27),h=n(32),f=n(9),v=n(29),b=n.n(v).a.create({baseURL:"https://my-json-server.typicode.com/VictorVQZ/comments-thread"}),E=n(8),A=n.n(E),C=n(10),_=n(6),g=n.n(_),y=function(e){return o.a.createElement("div",{className:"replies"},e.replies.map((function(t){return o.a.createElement(N,{key:t.id,id:t.id,author:t.author,comment:t.comment,date:t.date,replies:t.replies,commentAdded:e.commentAdded})})))},j=n(11),O=n.n(j),D=function(e){var t=Object(a.useState)(""),n=Object(C.a)(t,2),m=n[0],c=n[1];return o.a.createElement("div",{className:O.a.addComment},o.a.createElement("textarea",{className:O.a.textarea,onChange:function(e){return c(e.target.value)},value:m}),o.a.createElement("button",{className:O.a.publishButton,onClick:function(){e.replyState&&e.replyState(!1),e.commentAdded(m,e.commentId),c("")}},"Publish"))},N=function(e){var t=Object(a.useState)(!1),n=Object(C.a)(t,2),m=n[0],c=n[1];return o.a.createElement("div",{className:g.a.comment},o.a.createElement("div",{className:g.a.commentHeader},o.a.createElement("div",null,e.author),o.a.createElement("div",{className:g.a.commentDate},A()(e.date).format("DD-MM-YYYY HH:mm"))),o.a.createElement("div",{className:"body"},e.comment),o.a.createElement("div",null,o.a.createElement("button",{className:g.a.replyButton,onClick:function(){return c(!m)}},"Reply"),m?o.a.createElement(D,{commentId:e.id,commentAdded:e.commentAdded,replyState:c}):null),o.a.createElement(y,{replies:e.replies,commentAdded:e.commentAdded}))},k=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onComponentMount()}},{key:"publishCommentHandler",value:function(e,t){var n={author:"user@test.com",comment:e,date:A()().format("YYYY-MM-DDTHH:mm:ss"),commentId:t};this.props.onAddedComment(n)}},{key:"findReplies",value:function(e){var t=this,n=[];return this.props.comments.filter((function(t){return t.commentId===e&&t.id!==e})).forEach((function(e,a){var o=Object(d.a)({},e);o.replies=t.findReplies(e.id),n.push(o)})),n}},{key:"render",value:function(){var e=this,t=this.findReplies(null);return o.a.createElement("div",{style:{paddingRight:"10px",paddingBottom:"10px"}},o.a.createElement("h4",null,"Add comment"),o.a.createElement(D,{commentId:null,commentAdded:this.publishCommentHandler.bind(this)}),t.map((function(t){return o.a.createElement(N,{key:t.id,id:t.id,author:t.author,comment:t.comment,date:t.date,replies:t.replies,commentAdded:e.publishCommentHandler.bind(e)})})))}}]),t}(a.Component),H=Object(f.b)((function(e){return{comments:e.comments}}),(function(e){return{onComponentMount:function(){return e((function(e){b.get("/comments").then((function(t){var n=t.data;e({type:"FETCH_DATA",comments:n})}))}))},onAddedComment:function(t){return e((n=t,function(e){b.post("/comments",n).then((function(t){var n=t.data;e({type:"ADD_COMMENT",comment:n})}))}));var n}}}))(k);var M=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:i.a,className:"App-logo",alt:"logo"})),o.a.createElement(H,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=n(4),x={comments:[]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DATA":return Object(d.a)({},e,{comments:t.comments});case"ADD_COMMENT":var n=t.comment;return e.comments.some((function(e){return e.id===n.id}))&&(n.id=(new Date).getTime()),Object(d.a)({},e,{comments:e.comments.concat(n)});default:return e}},I=n(30),T=Object(w.c)(B,Object(w.a)((function(e){return function(t){return function(n){console.log("[Middleware] Dispatching",n);var a=t(n);return console.log("[Middleware] next state",e.getState()),a}}}),I.a));c.a.render(o.a.createElement(f.a,{store:T},o.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.2040efa1.chunk.js.map